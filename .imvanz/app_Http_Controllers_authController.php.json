[
  {
    "timestamp": "2025-05-06T21:16:55.769Z",
    "fileName": "app\\Http\\Controllers\\authController.php",
    "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Illuminate\\Support\\Facades\\File;\nuse Laravel\\Socialite\\Facades\\Socialite;\n\nclass authController extends Controller\n{\n\n    function index(){\n        return view('auth.index');\n    }\n\n    function redirect(){\n        return Socialite::driver('google')->redirect();\n    }\n\n    function callback(){\n\n        $user = Socialite::driver('google')->user();\n        $id = $user->id;\n        $email = $user->email;\n        $name = $user->name;\n        $avatar = $user->avatar;\n\n\n\n        $cek = User::where('email', $email)->count();\n        if($cek > 0) {\n\n            $avatar_file = $id . \".jpg\";\n            $fileContent = file_get_contents($avatar);\n            File::put(public_path(\"admin/images/faces/$avatar_file\"), $fileContent);\n\n            $user = User::updateOrCreate(\n                ['email' => $email],\n                [\n                    'name' => $name,\n                    'google_id' => $id,\n                    'avatar' => $avatar_file\n                ]\n\n            );\n            Auth::login($user);\n            return redirect() -> to ('dashboard');\n        } else {\n            return redirect() -> to('auth')->with('eror', 'akun yang anda gunakan tidak diizinkan untuk mengakses halaman ini');\n        }\n    }\n\n    public function logout(){\n        Auth::logout();\n        return redirect()-> to ('auth');\n    }\n\n}\n",
    "format": "php"
  },
  {
    "timestamp": "2025-05-06T21:30:08.199Z",
    "fileName": "app\\Http\\Controllers\\authController.php",
    "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Illuminate\\Support\\Facades\\File;\nuse Laravel\\Socialite\\Facades\\Socialite;\n\nclass authController extends Controller\n{\n\n    function index(){\n        return view('auth.index');\n    }\n\n    function redirect(){\n        return Socialite::driver('google')->redirect();\n    }\n\n    function callback(){\n\n        $user = Socialite::driver('google')->user();\n        $id = $user->id;\n        $email = $user->email;\n        $name = $user->name;\n        $avatar = $user->avatar;\n\n        echo $avatar;\n        exit();\n\n        $cek = User::where('email', $email)->count();\n        if($cek > 0) {\n\n            $avatar_file = $id . \".jpg\";\n            $fileContent = file_get_contents($avatar);\n            File::put(public_path(\"admin/images/faces/$avatar_file\"), $fileContent);\n\n            $user = User::updateOrCreate(\n                ['email' => $email],\n                [\n                    'name' => $name,\n                    'google_id' => $id,\n                    'avatar' => $avatar_file\n                ]\n\n            );\n            Auth::login($user);\n            return redirect() -> to ('dashboard');\n        } else {\n            return redirect() -> to('auth')->with('eror', 'akun yang anda gunakan tidak diizinkan untuk mengakses halaman ini');\n        }\n    }\n\n    public function logout(){\n        Auth::logout();\n        return redirect()-> to ('auth');\n    }\n\n}\n",
    "format": "php"
  },
  {
    "timestamp": "2025-05-06T21:31:15.316Z",
    "fileName": "app\\Http\\Controllers\\authController.php",
    "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Illuminate\\Support\\Facades\\File;\nuse Laravel\\Socialite\\Facades\\Socialite;\n\nclass authController extends Controller\n{\n\n    function index(){\n        return view('auth.index');\n    }\n\n    function redirect(){\n        return Socialite::driver('google')->redirect();\n    }\n\n    function callback(){\n\n        $user = Socialite::driver('google')->user();\n        $id = $user->id;\n        $email = $user->email;\n        $name = $user->name;\n        $avatar = $user->avatar;\n\n\n\n        $cek = User::where('email', $email)->count();\n        if($cek > 0) {\n\n            $avatar_file = $id . \".jpg\";\n            $fileContent = file_get_contents($avatar);\n            File::put(public_path(\"admin/images/faces/$avatar_file\"), $fileContent);\n\n            $user = User::updateOrCreate(\n                ['email' => $email],\n                [\n                    'name' => $name,\n                    'google_id' => $id,\n                    'avatar' => $avatar_file\n                ]\n\n            );\n            Auth::login($user);\n            return redirect() -> to ('dashboard');\n        } else {\n            return redirect() -> to('auth')->with('eror', 'akun yang anda gunakan tidak diizinkan untuk mengakses halaman ini');\n        }\n    }\n\n    public function logout(){\n        Auth::logout();\n        return redirect()-> to ('auth');\n    }\n\n}\n",
    "format": "php"
  },
  {
    "timestamp": "2025-05-06T21:33:36.719Z",
    "fileName": "app\\Http\\Controllers\\authController.php",
    "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Illuminate\\Support\\Facades\\File;\nuse Laravel\\Socialite\\Facades\\Socialite;\n\nclass authController extends Controller\n{\n\n    function index(){\n        return view('auth.index');\n    }\n\n    function redirect(){\n        return Socialite::driver('google')->redirect();\n    }\n\n    function callback(){\n\n        $user = Socialite::driver('google')->user();\n        $id = $user->id;\n        $email = $user->email;\n        $name = $user->name;\n        $avatar = $user->avatar;\n\n\n        $cek = User::where('email', $email)->count();\n        if($cek > 0) {\n\n            $avatar_file = $id . \".jpg\";\n            $fileContent = file_get_contents($avatar);\n            File::put(public_path(\"admin/images/faces/$avatar_file\"), $fileContent);\n\n            $user = User::updateOrCreate(\n                ['email' => $email],\n                [\n                    'name' => $name,\n                    'google_id' => $id,\n                    'avatar' => $avatar_file\n                ]\n\n            );\n            Auth::login($user);\n            return redirect() -> to ('dashboard');\n        } else {\n            return redirect() -> to('auth')->with('eror', 'akun yang anda gunakan tidak diizinkan untuk mengakses halaman ini');\n        }\n    }\n\n    public function logout(){\n        Auth::logout();\n        return redirect()-> to ('auth');\n    }\n\n}\n",
    "format": "php"
  },
  {
    "timestamp": "2025-05-06T21:34:24.118Z",
    "fileName": "app\\Http\\Controllers\\authController.php",
    "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Illuminate\\Support\\Facades\\File;\nuse Laravel\\Socialite\\Facades\\Socialite;\n\nclass authController extends Controller\n{\n\n    function index(){\n        return view('auth.index');\n    }\n\n    function redirect(){\n        return Socialite::driver('google')->redirect();\n    }\n\n    function callback(){\n\n        $user = Socialite::driver('google')->user();\n        $id = $user->id;\n        $email = $user->email;\n        $name = $user->name;\n        $avatar = $user->avatar;\n\n\n        $cek = User::where('email', $email)->count();\n        if($cek > 0) {\n\n            $avatar_file = $id . \".jpg\";\n            $fileContent = file_get_contents($avatar);\n            File::put(public_path(\"admin/images/faces/$avatar_file\"), $fileContent);\n\n            $user = User::updateOrCreate(\n                ['email' => $email],\n                [\n                    'name' => $name,\n                    'google_id' => $id,\n                    'avatar' => $avatar_file\n                ]\n\n            );\n            Auth::login($user);\n            return redirect() -> to ('dashboard');\n        } else {\n            return redirect() -> to('auth')->with('eror', 'akun yang anda gunakan tidak diizinkan untuk mengakses halaman ini');\n        }\n    }\n\n    public function logout(){\n        Auth::logout();\n        return redirect()-> to ('auth');\n    }\n\n}\n",
    "format": "php"
  }
]